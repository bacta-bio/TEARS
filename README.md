# Segementations of E. coli with synthetic organelles

Supporting code for research article: Spatial engineering of E. coli with addressable phase-separated RNAs

Images were processed using a standardized pipeline upgraded from a previous study (Yang et al. 2016) as the following: Cellpose (Stringer et al. 2021), a generalist algorithm for cellular segmentation is trained and then segments E. coli cells from 16-bit grayscale microscopy images, resulting in binary mask images. Segmentation errors are corrected semi-automatically by an in-house ImageJ script (shared code, segmentation_correction.zip). The corrected segmentations are then re-used as input to the training dataset to increase the accuracy of the training model. A coarse split or merge by the painting tools by ImageJ is used to correct the segmentation and the final segmentation is then achieved by re-running the script. The Regions of Interest (ROI) of each cell are extracted and the relevant information as intensity, area are output into a csv file.

Data acquired from segmentation was further analyzed using Matlab codes (shared code, data_analysis.zip). For cells containing TEARS, the “cytosol” was considered as the area within the cell excluding all identified foci. To be noticed, automatic analysis may include solute-free phases in TEARS into the cytosol area as well. For all analyses, cells, foci, or cytosol that have negative mean fluorescence intensity were discarded from the dataset. We denote the fluorescence values of a subject of interest (e.g. cytosolic fluorescence), as value F. For mean fluorescence estimation, we bootstrapped data to calculate mean fluorescence Fi, i from 1 to 10,000. For bootstrapping, we first calculated the mean and standard deviation of fluorescence on logarithm scale as log(F) and σ(log(F)), discard the outliers that 2.5 standard deviation away, i.e. |F-log(F)| > 2.5 σ(log(F)), and then bootstrapped data to calculate coefficient of variation CVi(F) = σ(F)/F. Then we calculated expected values and standard deviation of bootstrapped results. To be noticed, keeping outliers during bootstrap can cause inappropriate distributions.

For the droplet fusion analysis, droplets were first segmented by our ImageJ script (shared code, fusion_display.zip) to generate ROIs (Region of Interest) which are saved into a zip file. By using the script, the relevant information of each ROI (Circularity, Area, Intensity) of each frame is extracted and exploited into a csv file, the csv file is then read and interpreted by the shared python script (shared code, droplets_info_extraction.zip) to generate the fusion process display. Examples are included in the shared code.
